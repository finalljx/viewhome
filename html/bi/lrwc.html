<!DOCTYPE html>
<html>
<head>
<title>利润完成</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1.0" />
	<link
	href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css"
	rel="stylesheet">
<link rel="stylesheet"
	href="../../lib/jquery-mobile/jquery.mobile.min.css" />
<link rel="stylesheet" href="../../assets/jquery.mobile-sugon.css" />
<script src="../../lib/jquery/jquery.min.js"></script>
<script src="../../lib/jquery-cookie/jquery.cookie.js"></script>
<script src="../../lib/encrypt/encrypt.js"></script>
<script src="../../lib/json/json2.js"></script>
<script src="../../lib/hori/hori.js?tag=21369"></script>
<script src="../../lib/jquery-mobile/jquery.mobile.min.js"></script>
<script src="../../config/web/config.js"></script>
<style>
a {
	text-decoration: none;
}
</style>

</head>
<body>
	<!-- 利润完成 -->
	<div >
<!-- 	<div style="float:right;">
	<div id="yusuan" align="left" style="font-size:1.3em;"></div>
	<div id="leiji" align="left" style="font-size:1.3em;"></div>
	<div id="bili" align="left" style="font-size:1.3em;"></div>
	</div> -->
	<div id="main"  style="height: 400px">
	</div>
	<div style="float:left; margin-left: 50px;">
    <div id="yusuan" align="left" style="font-size:1.3em;"></div>
    <div id="leiji" align="left" style="font-size:1.3em;"></div>
    <div id="bili" align="left" style="font-size:1.3em;"></div>
	</div>
	<script src="../asset/js/echarts-plain-original.js"></script>
	<script src="../asset/js/echartsHome.js"></script>
	<script src="../asset/js/bootstrap.min.js"></script>
	<script src="../asset/js/echartsExample.js"></script>
<script type="text/javascript">


	$(document).ready(function(){
		$.hori.setHeaderTitle("利润完成");
		//加载收入完成图表数据
		loadSrwcChart();
	});
	//加载收入完成图表数据
	function loadSrwcChart(){
            var url = $.hori.getconfig().appServerHost+"view/bi/loadSrwcChart/accsyBiReport/services/reqBiReportData";
            var temp = "$lt;?xml version='1.0' encoding='utf-8'?$gt;$lt;root$gt;$lt;reportdata$gt;$lt;reportid$gt;16$lt;/reportid$gt;$lt;/reportdata$gt;$lt;/root$gt;";
            var soap ="<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/' xmlns:web='http://webservice.biz.digiwin.com'>";
                soap+='<soapenv:Header/><soapenv:Body>';
                soap+='<web:viewReportById>';
                soap+='<web:in0>'+temp+'</web:in0>';
                soap+='</web:viewReportById>';
                soap+=' </soapenv:Body></soapenv:Envelope>';
            var data = "data-xml="+soap;
            $.hori.ajax({
                "type":"post",
                "url":url,
                "data":data,
                "success":function(res){
                	var json=JSON.parse(res);
                	reportdata=json.reportdata;
                	var seriesname=reportdata.seriesname.split('|');
                	var seriesdata=reportdata.seriesdata.split('|');
                	var one=seriesdata[1]/seriesdata[0]-0.1;
                	var two=seriesdata[2]/100+0.1;
                	var lrwc=seriesdata[1];
                	var b=seriesname[0]+":"+seriesdata[0]+reportdata.primaryunit;
                	document.getElementById("yusuan").innerHTML=b;
                	var c=seriesname[1]+":"+seriesdata[1]+reportdata.primaryunit;
                	document.getElementById("leiji").innerHTML=c;
                	var d=seriesname[2]+":"+seriesdata[2]+"%";
                	document.getElementById("bili").innerHTML=d;
                	var ww=(Math.ceil((seriesdata[0])/10))*10;
                	draw(ww,lrwc,0.6,0.7);
                },
                "error":function(res){
                    alert("error:" + res);
                    $.hori.hideLoading();
                }
            });
    }
	function draw(ljwcz,lrwc,colorOne,colorTwo){
		var option = {
				animation:false,
				toolbox : {
					show : false,
					feature : {
						mark : {
							show : false
						},
						restore : {
							show : false
						},
						saveAsImage : {
							show : false
						}
					}
				},
				
				series : [ {
					name : '收入完成',
					type : 'gauge',
					startAngle: 180,
		            endAngle : 0,
					splitNumber : 4, // 分割段数，默认为5
					max: ljwcz,   
					axisLine : { // 坐标轴线
						lineStyle : { // 属性lineStyle控制线条样式
                            color : [ [ colorOne, '#FFCC66' ], [ colorTwo, '#3399ff' ],
                                    [ 1, '#A066D3' ] ],
                            width : 50
                        }
					},
					axisTick : { // 坐标轴小标记
						splitNumber : 10, // 每份split细分多少段
                        length : 4, // 属性length控制线长
                        lineStyle : { // 属性lineStyle控制线条样式
                            color : '#F5F5F5'
                                //color : '#292421'
                        }
					},
					axisLabel : { // 坐标轴文本标签，详见axis.axisLabel
						textStyle : { // 其余属性默认使用全局文本样式，详见TEXTSTYLE
							color : '#ffffff'
						}
					},
					splitLine : { // 分隔线
						show : true, // 默认显示，属性show控制显示与否
						length : 10, // 属性length控制线长
						lineStyle : { // 属性lineStyle（详见lineStyle）控制线条样式
							color : '#00EEEE'
						}
					},
					 
					pointer : {
						width : 5
					},
					title : {
						show : true,
						offsetCenter : [ 0, '-40%' ], // x, y，单位px
						textStyle : { // 其余属性默认使用全局文本样式，详见TEXTSTYLE
							fontWeight : 'bolder'
						}
					},
					
					detail : {
						show:false,
						//formatter:'{value}%',
						textStyle : { // 其余属性默认使用全局文本样式，详见TEXTSTYLE
							color : 'red',
							fontWeight : 'bolder'
						}
					},
					data : [ {
						value : 0,
					} ]
				} ]
			};
			var myChart = echarts.init(document.getElementById('main'));
			option.series[0].data[0].value =lrwc;
			myChart.setOption(option);
	}
	</script>
</body>
</html>
